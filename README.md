# üß© –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã CRM-—Å–∏—Å—Ç–µ–º—ã

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –Ω–∞–±–æ—Ä **–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –¥–ª—è CRM**,  
—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ **Python + Pytest + Playwright + Allure**.  
–û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ CRM –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –∞–±–æ–Ω–µ–Ω—Ç–∞.

---

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
‚îú‚îÄ tests/                         # –í—Å–µ –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã CRM
‚îÇ  ‚îú‚îÄ test_crm.py                 # –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π –ø—Ä–æ–≤–µ—Ä–∫–∏ CRM
‚îÇ  ‚îú‚îÄ conftest.py                 # –§–∏–∫—Å—Ç—É—Ä—ã Playwright, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, pre/post —É—Å–ª–æ–≤–∏—è
‚îÇ  ‚îú‚îÄ locators/                   # –õ–æ–∫–∞—Ç–æ—Ä—ã –¥–ª—è UI-—ç–ª–µ–º–µ–Ω—Ç–æ–≤
‚îÇ  ‚îî‚îÄ utils/                      # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã, –æ–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ
‚îú‚îÄ allure/                        # –ü–∞–ø–∫–∞ –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤
‚îÇ  ‚îú‚îÄ allure-results/             # –°—ã—Ä—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã pytest
‚îÇ  ‚îú‚îÄ allure-report/              # –ü–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç—á—ë—Ç Allure
‚îÇ  ‚îî‚îÄ allure-archives/            # –ê—Ä—Ö–∏–≤—ã –æ—Ç—á—ë—Ç–æ–≤ –ø–æ –¥–∞—Ç–∞–º
‚îÇ
‚îú‚îÄ run_tests.sh                   # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ + –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞ + ngrok
‚îú‚îÄ requirements.txt               # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ README.md                      # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```
---
### üß† –û–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏

- **–¢–µ—Å—Ç–æ–≤–∞—è —Ü–µ–ª—å:** –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ CRM (–ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤).  
- **–û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π:** `test_crm_flow` ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –∞–±–æ–Ω–µ–Ω—Ç–∞.

### üîπ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –∞–±–æ–Ω–µ–Ω—Ç–∞

–¢–µ—Å—Ç –∑–∞—Ö–æ–¥–∏—Ç –≤ CRM –ø–æ–¥ —É—á—ë—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –∞–±–æ–Ω–µ–Ω—Ç–∞ –ø–æ –Ω–æ–º–µ—Ä—É –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:
- –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∏ –±–∞–ª–∞–Ω—Å–∞;  
- –Ω–∞–ª–∏—á–∏–µ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö —Ç–∞—Ä–∏—Ñ–æ–≤;  
- —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è (–§–ò–û, –Ω–æ–º–µ—Ä, –ò–ù–ù –∏ —Ç.–¥.);  
- —Ä–∞–±–æ—Ç–∞ –∫–Ω–æ–ø–æ–∫ –∏ –≤–∫–ª–∞–¥–æ–∫.

### üîπ –ü—Ä–æ–∫–ª–∏–∫–∏–≤–∞–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫

–ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ä–∞–∑–¥–µ–ª—ã:
- **–ö–∞—Ä—Ç–æ—á–∫–∞ –∞–±–æ–Ω–µ–Ω—Ç–∞**  
- **–õ–∏–º–∏—Ç—ã**  
- **–¢–∞—Ä–∏—Ñ—ã**
- **–ü–∞–∫–µ—Ç—ã**  
- **–£—Å–ª—É–≥–∏**  
- **–ö–æ–Ω—Ç–µ–Ω—Ç-—É—Å–ª—É–≥–∏**  
- **SMS**  
- **–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è**
- **HLR –°—Ç–∞—Ç—É—Å**
- **–ò—Å—Ç–æ—Ä–∏—è –æ–±—Ä–∞—â–µ–Ω–∏–π**
- **–ü—Ä–∏—á–∏–Ω—ã –æ–±—Ä–∞—â–µ–Ω–∏–π**  
- **–õ–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

–ö–∞–∂–¥–∞—è –≤–∫–ª–∞–¥–∫–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è **–ø–æ –µ–¥–∏–Ω–æ–º—É —Å—Ç–∏–ª—é —é–∑-–∫–µ–π—Å–∞**:
> –∫–ª–∏–∫ –ø–æ –≤–∫–ª–∞–¥–∫–µ ‚Üí –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Üí –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –æ—Ç—á—ë—Ç–æ–≤ Allure.

---

## üß© Allure –æ—Ç—á—ë—Ç—ã

–ö–∞–∂–¥—ã–π –ø—Ä–æ–≥–æ–Ω —Å–æ–∑–¥–∞—ë—Ç Allure-–æ—Ç—á—ë—Ç —Å —à–∞–≥–∞–º–∏:
- —É—Å–ø–µ—à–Ω—ã–µ –∏ —É–ø–∞–≤—à–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏;
- –≤–∫–ª–∞–¥–∫–∞ **Timeline**, **History Trend**, **Duration Trend**;
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏–≤–∞—Ü–∏—è –ø—Ä–æ—à–ª—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤ (–ø–∞–ø–∫–∞ `allure-archives`).

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `index.html`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞—Ä—Ö–∏–≤–æ–≤ –∏ —Ç–µ–∫—É—â–∏–π –æ—Ç—á—ë—Ç.

---

### üßæ –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ `run_tests.sh`

–°—Ü–µ–Ω–∞—Ä–∏–π `run_tests.sh`:

1. –û—á–∏—â–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã;  
2. –ö–æ–ø–∏—Ä—É–µ—Ç `history` –¥–ª—è —Ç—Ä–µ–Ω–¥–æ–≤ Allure;  
3. –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã;  
4. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç;  
5. –ê—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç;  
6. –ü–æ–¥–Ω–∏–º–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –Ω–∞ **http://127.0.0.1:8080**;  
7. –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫—É —á–µ—Ä–µ–∑ **ngrok** –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞. - –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

# ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤ –¥–ª—è Playwright
playwright install chromium
### –∏–ª–∏ –≤—Å–µ –±—Ä–∞—É–∑–µ—Ä—ã
playwright install

---

# üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
### –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤ CRM
pytest tests/test_crm.py

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞ –≤—Ä—É—á–Ω—É—é
allure generate allure/allure-results -o allure/allure-report --clean

### –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á—ë—Ç–∞ (–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)
allure serve allure/allure-results

### –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ (—Ç–µ—Å—Ç—ã + –æ—Ç—á—ë—Ç + –∞—Ä—Ö–∏–≤ + —Å–µ—Ä–≤–µ—Ä + ngrok)
```
./run_tests.sh
üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

playwright codegen demo.playwright.dev/todomvc                 - –∑–∞–ø—É—Å–∫ –æ–∫–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è
PYTHONPATH=. pytest tests/ --alluredir=allure/allure-results   - –∑–∞–ø—É—Å–∫ –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤
allure serve allure/allure-results                             - –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á—ë—Ç–∞
pkill -f ngrok                                                 - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö ngrok
./run_tests.sh                                                 - –∑–∞–ø—É—Å–∫ –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤ + –æ—Ç—á—ë—Ç + —Å–µ—Ä–≤–µ—Ä + ngrok
```

### üîπ –ó–∞–ø—É—Å–∫ –¢–û–õ–¨–ö–û –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤ + –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞
PYTHONPATH=. pytest tests/ --alluredir=allure/allure-results && \
allure generate allure/allure-results -o allure/allure-report --clean

### üîπ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–ø–∏—é –æ—Ç—á—ë—Ç–∞ –≤ –∞—Ä—Ö–∏–≤ —Å –¥–∞—Ç–æ–π
cp -r allure/allure-report "allure/allure-archives/$(date +%F_%H-%M-%S)"

### üîπ –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (index.html + –≤—Å–µ –æ—Ç—á—ë—Ç—ã)
npx http-server . -p 8080

### üîπ –ü—Ä–æ–±—Ä–æ—Å —á–µ—Ä–µ–∑ ngrok
pkill -f ngrok >/dev/null 2>&1 || true; ngrok http 8080 --log=stdout > ngrok.log &

### üîπ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä—ã
pkill -f "http-server .* -p 8080"
pkill -f ngrok

# üìä –ü—Ä–∏–º–µ—Ä –æ—Ç—á—ë—Ç–∞ Allure

### ‚úÖ Successful: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—à–ª–∞ –±–µ–∑ –æ—à–∏–±–æ–∫
### ‚ö†Ô∏è Broken: –û—à–∏–±–∫–∞ –≤ –ª–æ–≥–∏–∫–µ —Ç–µ—Å—Ç–∞ –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
### ‚ùå Failed: –û—à–∏–±–∫–∞ –≤ UI/API
### üì∏ Attachments: –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∏ –ª–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
### üîó –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
–ü—Ä–æ–µ–∫—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å GitLab/GitHub –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–≥–æ–Ω–æ–≤.
–û—Ç—á—ë—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞—Ä—Ö–∏–≤–∏—Ä—É—é—Ç—Å—è –≤ autotest-reports (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–∞–±–º–æ–¥—É–ª—å).

–í–æ–∑–º–æ–∂–µ–Ω —Ä—É—á–Ω–æ–π –ø—É—à –æ—Ç—á—ë—Ç–æ–≤ –ø–æ—Å–ª–µ –ø—Ä–æ–≥–æ–Ω–∞ –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.

# üß© –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∞–±–º–æ–¥—É–ª—è Allure Reports
–ï—Å–ª–∏ –æ—Ç—á—ë—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Autotest-Reports),
—Ç–æ —Å–∞–±–º–æ–¥—É–ª—å –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∏ –ø—É—à–∏—Ç—Å—è –≤—Ä—É—á–Ω—É—é —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

````

# –î–æ–±–∞–≤–∏—Ç—å —Å–∞–±–º–æ–¥—É–ª—å (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω)
git submodule add https://gitlab.local.iti.domain/autotestsqa1/autotest-reports.git autotest-reports

# –ü–µ—Ä–µ–π—Ç–∏ –≤ —Å–∞–±–º–æ–¥—É–ª—å
cd autotest-reports

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
git status

# –î–æ–±–∞–≤–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ–≤—ã–µ Allure –æ—Ç—á—ë—Ç—ã)
git add .

# –ö–æ–º–º–∏—Ç–∏–º
git commit -m "–û–±–Ω–æ–≤–ª—ë–Ω Allure –æ—Ç—á—ë—Ç"

# –ü—É—à–∏–º –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –æ—Ç—á—ë—Ç–æ–≤
git push origin main

# –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
cd ..
üì¶ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GitLab

cd existing_repo
git remote add origin URL
git branch -M main
git push -uf origin main